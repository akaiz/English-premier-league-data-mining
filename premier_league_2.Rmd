---
title: "premier_league_2"
author: "Agaba isaac"
date: "May 9, 2016"
output: html_document
---

## Current Season

```{r se2015_2016}
setwd("C:/Users/akaiz/Documents/data mining/data")


se20062007  <- read.csv("dataset/2006-2007.csv")
se20072008  <- read.csv("dataset/2007-2008.csv")
se20082009  <- read.csv("dataset/2008-2009.csv")
se20092010  <- read.csv("dataset/2009-2010.csv")
se20102011  <- read.csv("dataset/2010-2011.csv")
se20112012  <- read.csv("dataset/2011-2012.csv")
se20132014  <- read.csv("dataset/2013-2014.csv")
se20142015  <- read.csv("dataset/2014-2015.csv")





```

## Referees

```{r pressure, echo=FALSE}

looper=function(team,table,title){
   point = 0
   galldif=0
  for (i in 1:nrow(table)) {
   
    if(table[i,]$HomeTeam==team |table[i,]$AwayTeam==team){
         # print(paste0(table[i,]$HomeTeam,"=======",table[i,]$AwayTeam,">",table[i,]$FTR))
      
        if(table[i,]$HomeTeam==team & table[i,]$FTR=="H" )
        {
          point=point+3
          galldif=galldif+(table[i,]$FTHG-table[i,]$FTAG)
             
          
        }
        else  if(table[i,]$HomeTeam!=team & table[i,]$FTR=="H" ){
           galldif=galldif-(table[i,]$FTHG-table[i,]$FTAG)
        }
      
      
      
      if(table[i,]$AwayTeam==team & table[i,]$FTR=="A" )
        {
          point=point+3
             print(paste0(i,"--",3,"--",table[i,]$AwayTeam))
              galldif=galldif+(table[i,]$FTAG-table[i,]$FTHG)
          
      }
      else  if(table[i,]$AwayTeam!=team & table[i,]$FTR=="A" ){
           galldif=galldif-(table[i,]$FTAG-table[i,]$FTHG)
        }
      
      if(table[i,]$FTR=="D")
        {
          point=point+1
            
      }
       
      
      
      
    }

  }
   

      
        t=paste("rankings/ranking_",title,".csv")
      
      write(c(team,point,galldif), file = t, 3, append = TRUE, sep = ",")
  
}


table_generator = function(team,title)
{
  teams = unique(team$HomeTeam)

for(t in teams)
{
 
  looper(t,team,title)
}

  
}

table_generator(se20062007,"se20062007")
table_generator(se20072008,"se20072008")
table_generator(se20082009,"se20082009")
table_generator(se20092010,"se20092010")


